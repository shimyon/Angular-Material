
@{
    Layout = "_Layout.cshtml";
}


<div class="container">
    <div class="sechead pb5 fs14 mt20 "><b>Template</b></div>

    <div class="form-row">
        <div class="form-group col-md-6">
            <label for="inputAddress">Template Name</label>
            <input type="text" class="form-control" id="TemplateName">
        </div>
        <div class="form-group col-md-6">
            <label for="inputAddress">Template For</label>
            <input type="text" class="form-control" id="TemplateFor">
        </div>
    </div>
    <div class="form-group">
        <div>
            <textarea name="TemplateData" id="TemplateData" rows="10" cols="80">
            </textarea>
        </div>
    </div>
    <div class="col-md-4 offset-md-4 mt-5">
        <button type="submit" style="width: 100%" class="btn btn-primary" onclick="saveData();">Save</button>
    </div>
    </div>



@section scripts{
<script src="~/Content/ckeditor/ckeditor/ckeditor.js"></script>

<script type="text/javascript">

         $(function(){
                // GetById();
                CKEDITOR.replace( 'TemplateData' );
          })

         function saveData(){

                if (!$("#TemplateName").val()) {
                        alert('Please enter Template Name');
                        $("#TemplateName").focus()
                        return false;
                }

                if (!$("#TemplateFor").val()) {
                        alert('Please enter Template For');
                        $("#TemplateFor").focus()
                        return false;
                }
            debugger
                var value = CKEDITOR.instances['TemplateData'].getData()
                if (!value) {
                    alert('Please enter Template Data');
                    return false;
                }

        var obj = {
            TemplateName: $("#TemplateName").val(),
            TemplateFor: $("#TemplateFor").val(),
            TemplateData: value
        };
        $.ajax({
        type: "POST",
        url: AppConfig.ApiPath + "Template/AddData",
        data: JSON.stringify(obj),
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        success: function (res) {
            if (res.code == 0) {
                alert("Saved successfully");
                RefreshDatatable();
             }
            else {
                alert(res.message);
            }
            },
         error: function () {
            alert("Error while inserting data");
         }
        });
        }
</script>
}